\documentclass{article}
\usepackage{lmodern}
\usepackage[margin=0.5in]{geometry}
\usepackage{amsmath}
\usepackage{physics}
\usepackage{array}
\newcolumntype{C}{>{$}c<{$}} % math-mode version of "c" column type
\begin{document}

\section*{SHM path integral}%
\label{sec:shm_path_integral}

Start with a hammy:

\begin{align}
	H \left(P,Q\right) = \frac{P^2}{2m} + \frac{m\omega^2Q^2}{2}
\end{align}
In path integrals, operators are functions so $P \rightarrow p$ and $Q \rightarrow q$. Here we're interested in gound state to ground state, because of reasons. Using:
\begin{align}
	\braket{0}{0} &= \braket{0}{q_n}\braket{q_{n-1}}{q_{n-2}}\ldots \braket{q_1}{0} \\
		      &\Downarrow \nonumber \\
	\braket{0}{0} &= \int \mathcal{D}p \mathcal{D}q \,exp \left[i \int_{-\infty}^{\infty}dt \left(p\dot{q} - \left(1-i\epsilon)H + fq \right)\right)\right] \label{a1}
\end{align}
Where H is Weyl-ordered (average of normal and anti-normal ordering).\\
Applying $(1-i\epsilon)$ on H will pick out the ground states in $\pm\infty$ time, leads to the following transforms:
\begin{align}
	\frac{1}{2}m\omega^2q &\rightarrow \frac{1}{2}(1-i\epsilon)m\omega^2 \\
		  & and \\
	\frac{1}{2m}p^2 &\rightarrow \frac{1}{2(1-i\epsilon)m}p^2 = \frac{(1-i\epsilon)(1+i\epsilon)}{2m(1+i\epsilon)}p^2 = \frac{1+i\epsilon-i\epsilon+\mathcal{O}(2)}{2m(1+i\epsilon)}p^2 \\
\Rightarrow \frac{1}{2m}p^2 &\rightarrow \frac{1}{2(1+i\epsilon)m}p^2
\end{align}
subbing back into \ref{a1}:
\begin{align}
	\braket{0}{0} &= \int \mathcal{D}p \mathcal{D}q \,exp \left[i \int_{-\infty}^{\infty}dt \left(p\dot{q} - \frac{p^2}{(1+i\epsilon)2m} - \frac{1-i\epsilon}{2} m\omega^2q^2 + fq \right)\right]
\end{align}

now the sweet insides can be integrated out over $\mathcal{D}p$ to turn it into a laggy, using $\partial_{p}\mathcal{H} = \dot{q}$ :
\begin{align}
	\braket{0}{0}=\int \mathcal{D}q \,exp \left[ i \int_{-\infty}^{\infty}dt \left( \frac{1}{2}(1+i\epsilon)m\dot{q}^2 - \frac{1}{2}(1-i\epsilon)m\omega^2q^2 + fq \right) \right] \label{a2}
\end{align}
Next up, perform a fourier transform to get this shit into functions of energies and shit. Use these variables, they're good, trust me, you are me after all:
\begin{align}
	q(t)&=\int_{-\infty}^{\infty} \frac{dE}{\tau} e^{-iEt} \tilde{q}(E) \\
	\dot{q}(t)&=\int_{-\infty}^{\infty} -\frac{dE}{\tau}\,iE\,e^{-iEt} \tilde{q}(E) \\
\tilde{q}(E)&=\int_{-\infty}^{\infty}dt\,e^{iEt}q(t)
\end{align}
Now take all that rubbish and shove it into the terms in \ref{a2} \\ do not forget that there's squared variables so we'll have to integrate over two different variables, thus E and E', and t and t'
\begin{align}
	\braket{0}{0}_f = \int \mathcal{D}q\, exp \left\{ \frac{i}{2} \int_{-\infty}^{\infty} \frac{dE}{\tau} \frac{dE'}{\tau}\, e^{-i(E+E')t} \bigg[ \Big( -(1+i\epsilon)EE' - (1-i\epsilon)\omega^2 \Big) \tilde{q}(E) \tilde{q}(E') + \tilde{f}(E) \tilde{q}(E') + \tilde{f}(E') \tilde{q}(E) \bigg] \right\}
\end{align}
Now it looks like a fucking goddamn mess, but we can integrate over E' using a neat delta function:
\begin{align}
	\tau \delta(a-b)= \int dx\,e^{i(a-b)x} \implies \frac{1}{2} \int \frac{dE\,dE'}{\tau^2} \,\delta(E+E') [ \ldots ]
\end{align}
\newpage Reslutting in:
\begin{align}
	\braket{0}{0}_f = \int \mathcal{D}q\, exp \Bigg\{ \frac{1}{2} \int_{-\infty}^{\infty} \frac{dE}{\tau} \bigg[ &\underbrace{ \Big( (1+i\epsilon)E^2 - (1-i\epsilon)\omega^2 \Big) }_{\downarrow} \tilde{q}(E) \tilde{q}(-E) + \tilde{f}(E) \tilde{q}(-E) + \tilde{f}(-E) \tilde{q}(E) \bigg]  \Bigg\} \label{a4} \\
														     &E^2 - \omega^2 + i(E^2 + \omega^2)\epsilon \implies E^2 - \omega^2 - i\epsilon \label{a3}
\end{align}
Now as a magic trick we do a little quasigauge shift. We gunna introduce x as a shift of q and the inverse of \ref{a3}. The benefit of this is that since it's a linear shift in q/x only the measure won't change:
\begin{align}
	\tilde{x}(E) &= \tilde{q}(E) + \frac{ \tilde{f}(E) }{E^2 - \omega^2 + i\epsilon } \\
	\mathcal{D}q &= \mathcal{D}x
\end{align}
Substituting back into \ref{a4} and splitting the path integral into a phase dependent on x and independent of x:
\begin{align}
	\braket{0}{0}_f = \underbrace{ exp \bigg[ \frac{i}{2} \int \frac{dE}{\tau} \frac{ \tilde{f}(E) \tilde{f}(-E) }{-E^2+\omega^2-i\epsilon} \bigg] }_{\text{basically \textit{the} interesting part - the propagator comes from here}} \cdot \underbrace{ \int \mathcal{D}x\, exp \bigg[ \frac{i}{2} \int \frac{dE}{\tau} \tilde{x}(E) (E^2 - \omega^2 +i\epsilon) \tilde{x}(-E) \bigg] }_{\text{when } f=0 \implies \braket{0}{0}_f	\, = \, 1 \text{ which is the ground state}} \\
\end{align}
As noted by Srednicki - a system in a ground state will remain in a ground state (aka itial and final states are ground $\braket{0}{0}$) unless acted on by an external force ($f \neq 0$) - which in this case it is, resulting in there being a propagator - a source term/current term (very much related to the J term in maxwell's eqns - in this case just the driving fq term. \\
To actually proceed solving this we'll idntify the partts of the first term that aren't $\tilde{f}(something)$ dependent, act with that on a phasor and call it a green function. this will let us do a fourier/delta transform thing.
\begin{align}
	\braket{0}{0}_f &= exp \bigg[ \frac{i}{2} \int \underbrace{ \frac{dE}{\tau(-E^2+\omega^2-i\epsilon)}}_{\text{green fx}} \, \tilde{f}(E) \tilde{f}(-E) \bigg] \\
	G(t-t') &= \int \frac{dE}{\tau(-E^2+\omega^2-i\epsilon)} \; e^{-iE(t-t')} \label{b1}
\end{align}
Where the green function is a solution to the wave eqn
\begin{align}
	(\partial_{t}^2 + \omega^2)G(t-t') = \delta(t-t') \label{b2}
\end{align}
in other words it's a well dressed delta function. or in other other words, a green function is the inverse of a differential operator. or in other other words it's a convolution function. there may be some other other other words, but idk, it should be pretty obv from its application how it works innit. \\
Most importantly however, a green function is what's more commonly known as the propagator. \\
In any case, let's actually test it out by chucking \ref{b1} into \ref{b2} explicitly:
\begin{align}
	&(\partial_{t}^2 + \omega^2) \int \frac{dE}{\tau(-E^2+\omega^2-i\epsilon)} \; e^{-iE(t-t')} = \int \frac{dE}{\tau(-E^2+\omega^2-i\epsilon)} \; \left(\partial_{t}^2e^{-iE(t-t')} + \omega^2e^{-iE(t-t')}\right) = \\[1.5ex]
	&= \int \frac{dE}{\tau(-E^2+\omega^2-i\epsilon)} \; \left((-iE)(-iE)e^{-iE(t-t')} + \omega^2e^{-iE(t-t')}\right) = \int \frac{dE}{\tau(-E^2+\omega^2-i\epsilon)} \; \left(-E^2 + \omega^2\right)e^{-iE(t-t')} = \\[1.5ex]
	&=  \int \frac{dE}{\tau} \frac{\left(-E^2 + \omega^2\right)}{(-E^2+\omega^2-i\epsilon)} \; e^{-iE(t-t')}\stackrel{\epsilon \rightarrow 0}{=} \int \frac{dE}{\tau} \frac{\left(-E^2 + \omega^2\right)}{(-E^2+\omega^2)} \; e^{-iE(t-t')} = \int \frac{dE}{\tau} \; e^{-iE(t-t')} = \delta(t-t')
\end{align}
Beautiful, it fits. But back to business, but let's actually evaluate the propagator, we're gonna use funky ass Cauchy residue theorem or whatever the hell its properly called:
\begin{align}
\oint_{\gamma} f(z)dz = \tau i \sum_{a_i \in \gamma} Res_{z=a_i} f(z)
\end{align}
Aka sum all the poles $a_i$ within the $\gamma$ contour. The residue is then just the value of the function without the particular pole. So first cleverly split the bottom term into the roots of a completed square (factoring out a minus overall to have nicer plusminuses to work with):
\begin{align}
	\int \frac{dE\; e^{-iE(t-t')}}{\tau(-E^2+\omega^2-i\epsilon)}  = -\int \frac{dE \; e^{-iE(t-t')}}{\tau\left( E + \sqrt{\omega^2 + i\epsilon}\right)\left( E + \sqrt{\omega^2 - i\epsilon}\right)}=
\end{align}
\end{document}
